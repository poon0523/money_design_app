{"ast":null,"code":"export function encodeMethodIntoRequestBody(event) {\n  if (event.target instanceof HTMLFormElement) {\n    const form = event.target,\n      fetchOptions = event.detail.fetchOptions;\n    form.addEventListener(\"turbo:submit-start\", _ref => {\n      let submitter = _ref.detail.formSubmission.submitter;\n      const body = isBodyInit(fetchOptions.body) ? fetchOptions.body : new URLSearchParams();\n      const method = determineFetchMethod(submitter, body, form);\n      if (!/get/i.test(method)) {\n        if (/post/i.test(method)) {\n          body.delete(\"_method\");\n        } else {\n          body.set(\"_method\", method);\n        }\n        fetchOptions.method = \"post\";\n      }\n    }, {\n      once: true\n    });\n  }\n}\nfunction determineFetchMethod(submitter, body, form) {\n  const formMethod = determineFormMethod(submitter);\n  const overrideMethod = body.get(\"_method\");\n  const method = form.getAttribute(\"method\") || \"get\";\n  if (typeof formMethod == \"string\") {\n    return formMethod;\n  } else if (typeof overrideMethod == \"string\") {\n    return overrideMethod;\n  } else {\n    return method;\n  }\n}\nfunction determineFormMethod(submitter) {\n  if (submitter instanceof HTMLButtonElement || submitter instanceof HTMLInputElement) {\n    if (submitter.hasAttribute(\"formmethod\")) {\n      return submitter.formMethod;\n    } else {\n      return null;\n    }\n  } else {\n    return null;\n  }\n}\nfunction isBodyInit(body) {\n  return body instanceof FormData || body instanceof URLSearchParams;\n}","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}